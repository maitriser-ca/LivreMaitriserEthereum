<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.17">
<title>Contrats intelligents et Vyper</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article data-line-1">
<div id="header">
</div>
<div id="content">
<div class="sect1 data-line-2">
<h2 id="vyper_chap">Contrats intelligents et Vyper</h2>
<div class="sectionbody">
<div class="paragraph data-line-4">
<p>Vyper est un langage de programmation expérimental orienté contrat pour la machine virtuelle Ethereum qui s&#39;efforce de fournir une auditabilité supérieure, en permettant aux développeurs de produire plus facilement du code intelligible. En fait, l&#39;un des principes de Vyper est de rendre pratiquement impossible pour les développeurs d&#39;écrire du code trompeur.</p>
</div>
<div class="paragraph data-line-6">
<p>Dans ce chapitre, nous examinerons les problèmes courants liés aux contrats intelligents, présenterons le langage de programmation de contrats Vyper et le comparerons à Solidity, en démontrant les différences.</p>
</div>
<div class="sect2 data-line-8">
<h3 id="_vulnérabilités_et_vyper">Vulnérabilités et Vyper</h3>
<div class="paragraph data-line-10">
<p><a href="https://arxiv.org/pdf/1802.06038.pdf" data-href="https://arxiv.org/pdf/1802.06038.pdf">Une étude récente</a>  a analysé près d&#39;un million de contrats intelligents Ethereum déployés et a constaté que nombre de ces contrats contenaient de graves vulnérabilités. Au cours de leur analyse, les chercheurs ont défini trois catégories de base de vulnérabilités de trace :</p>
</div>
<div class="dlist data-line-12">
<dl>
<dt class="hdlist1">Contrats suicidaires </dt>
<dd>
<p>Contrats intelligents qui peuvent être tués par des adresses arbitraires</p>
</dd>
<dt class="hdlist1">Contrats cupides </dt>
<dd>
<p>Contrats intelligents pouvant atteindre un état dans lequel ils ne peuvent pas libérer d&#39;éther</p>
</dd>
<dt class="hdlist1">Contrats prodigues </dt>
<dd>
<p>Contrats intelligents pouvant être conclus pour libérer de l&#39;éther à des adresses arbitraires</p>
</dd>
</dl>
</div>
<div class="paragraph data-line-18">
<p>Les vulnérabilités sont introduites dans les contrats intelligents via le code. Il peut être fortement soutenu que ces vulnérabilités et d&#39;autres ne sont pas introduites intentionnellement, mais quoi qu&#39;il en soit, un code de contrat intelligent indésirable entraîne évidemment une perte de fonds inattendue pour les utilisateurs d&#39;Ethereum, et ce n&#39;est pas idéal. Vyper est conçu pour faciliter l&#39;écriture de code sécurisé, ou également pour rendre plus difficile l&#39;écriture accidentelle de code trompeur ou vulnérable.</p>
</div>
</div>
<div class="sect2 data-line-21">
<h3 id="comparison_to_solidity_sec">Comparaison avec Solidité</h3>
<div class="paragraph data-line-23">
<p> L&#39;une des façons dont Vyper essaie de rendre le code dangereux plus difficile à écrire est en <em>omettant</em> délibérément certaines fonctionnalités de Solidity. Il est important pour ceux qui envisagent de développer des contrats intelligents dans Vyper de comprendre quelles fonctionnalités Vyper n&#39;a <em>pas</em>, et pourquoi. Par conséquent, dans cette section, nous allons explorer ces fonctionnalités et expliquer pourquoi elles ont été omises.</p>
</div>
<div class="sect3 data-line-25">
<h4 id="_modificateurs">Modificateurs</h4>
<div class="paragraph data-line-27">
<p>Comme nous l&#39;avons vu dans le chapitre précédent, dans Solidity vous pouvez écrire une fonction à l&#39;aide de modificateurs. Par exemple, la fonction suivante, <code>changeOwner</code>, exécutera le code dans un modificateur appelé <code>onlyBy</code> dans le cadre de son exécution :</p>
</div>
<div class="listingblock data-line-30">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">fonction changeOwner(adresse _newOwner)
Publique
onlyBy(propriétaire)
{
propriétaire = _newOwner ;
}</code></pre>
</div>
</div>
<div class="paragraph data-line-39">
<p>Ce modificateur applique une règle relative à la propriété. Comme vous pouvez le voir, ce modificateur particulier agit comme un mécanisme pour effectuer une pré-vérification au nom de la fonction <code>changeOwner</code> :</p>
</div>
<div class="listingblock data-line-42">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">modificateur uniquementPar(adresse _compte)
{
require(msg.sender == _account);
_;
}</code></pre>
</div>
</div>
<div class="paragraph data-line-50">
<p>Mais les modificateurs ne sont pas là uniquement pour effectuer des vérifications, comme illustré ici. En fait, en tant que modificateurs, ils peuvent modifier considérablement l&#39;environnement d&#39;un contrat intelligent, dans le contexte de la fonction appelante. En termes simples, les modificateurs sont <em>omniprésents</em>.</p>
</div>
<div class="paragraph data-line-52">
<p>Regardons un autre exemple de style Solidity :</p>
</div>
<div class="listingblock data-line-55">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">enum Étapes {
SafeStage,
Stade de danger,
Étape finale
}

uint public creationTime = maintenant ;
Stages public stage = Stages.SafeStage;

function nextStage() interne {
stage = Stages(uint(stade) + 1);
}

modificateur stageTimeConfirmation() {
if (stage == Stages.SafeStage &amp;amp;&amp;amp;
maintenant &amp;gt;= creationTime + 10 jours)
étape suivante();
_;
}

fonction a()
Publique
stageTimeConfirmation
// Plus de code va ici
{
}</code></pre>
</div>
</div>
<div class="paragraph data-line-84">
<p>D&#39;une part, les développeurs doivent toujours vérifier tout autre code que leur propre code appelle. Cependant, il est possible que dans certaines situations (comme lorsque les contraintes de temps ou l&#39;épuisement entraînent un manque de concentration), un développeur oublie une seule ligne de code. Cela est encore plus probable si le développeur doit se déplacer dans un fichier volumineux tout en gardant mentalement une trace de la hiérarchie des appels de fonction et en mémorisant l&#39;état des variables de contrat intelligent.</p>
</div>
<div class="paragraph data-line-86">
<p>Regardons l&#39;exemple précédent un peu plus en profondeur. Imaginez qu&#39;un développeur écrive une fonction publique appelée &quot;a&quot;. Le développeur est nouveau dans ce contrat et utilise un modificateur écrit par quelqu&#39;un d&#39;autre. En un coup d&#39;œil, il semble que le modificateur <code>stageTimeConfirmation</code> effectue simplement quelques vérifications concernant l&#39;âge du contrat par rapport à la fonction appelante. Ce que le développeur peut <em>ne pas</em> réaliser, c&#39;est que le modificateur appelle également une autre fonction, <code>nextStage</code>. Dans ce scénario de démonstration simpliste, le simple fait d&#39;appeler la fonction publique &quot;a&quot; entraîne le déplacement de la variable &quot;stage&quot; du contrat intelligent de &quot;SafeStage&quot; à &quot;DangerStage&quot;.</p>
</div>
<div class="paragraph data-line-88">
<p>Vyper a complètement supprimé les modificateurs. Les recommandations de Vyper sont les suivantes : si vous n&#39;exécutez que des assertions avec des modificateurs, utilisez simplement des vérifications et des assertions en ligne dans le cadre de la fonction ; si vous modifiez l&#39;état du contrat intelligent, etc., intégrez à nouveau ces modifications explicitement à la fonction. Cela améliore l&#39;auditabilité et la lisibilité, car le lecteur n&#39;a pas à &quot;envelopper&quot; mentalement (ou manuellement) le code du modificateur autour de la fonction pour voir ce qu&#39;elle fait.</p>
</div>
</div>
<div class="sect3 data-line-90">
<h4 id="_héritage_de_classe">Héritage de classe</h4>
<div class="paragraph data-line-92">
<p>L&#39;héritage permet aux programmeurs pour exploiter la puissance du code pré-écrit en acquérant des fonctionnalités, des propriétés et des comportements préexistants à partir de bibliothèques de logiciels existantes. L&#39;héritage est puissant et favorise la réutilisation du code. Solidity prend en charge l&#39;héritage multiple ainsi que le polymorphisme, mais bien que ce soient des fonctionnalités clés de la programmation orientée objet, Vyper ne les prend pas en charge. Vyper soutient que la mise en œuvre de l&#39;héritage nécessite que les codeurs et les auditeurs sautent entre plusieurs fichiers afin de comprendre ce que fait le programme. Vyper considère également que l&#39;héritage multiple peut rendre le code trop compliqué à comprendre - un point de vue tacitement admis par Solidity <a href="http://bit.ly/2Q6Azvo" data-href="http://bit.ly/2Q6Azvo">documentation</a>, qui donne un exemple de la façon dont l&#39;héritage multiple peut être problématique.</p>
</div>
</div>
<div class="sect3 data-line-94">
<h4 id="_assemblage_en_ligne">Assemblage en ligne</h4>
<div class="paragraph data-line-96">
<p>L&#39;assemblage en ligne donne aux développeurs un accès de bas niveau à Ethereum Virtual Machine, permettant aux programmes Solidity d&#39;effectuer des opérations en accédant directement aux instructions EVM. Par exemple, le code assembleur en ligne suivant ajoute 3 à l&#39;emplacement mémoire 0x80 :</p>
</div>
<div class="listingblock data-line-98">
<div class="content">
<pre>3 0x80 mload ajouter 0x80 mstore</pre>
</div>
</div>
<div class="paragraph data-line-102">
<p>Vyper considère que la perte de lisibilité est un prix trop élevé à payer pour la puissance supplémentaire et ne prend donc pas en charge l&#39;assemblage en ligne.</p>
</div>
</div>
<div class="sect3 data-line-104">
<h4 id="_surcharge_de_fonction">Surcharge de fonction</h4>
<div class="paragraph data-line-106">
<p>La surcharge de fonction permet aux développeurs d&#39;écrire plusieurs fonctions du même nom . La fonction utilisée à une occasion donnée dépend des types d&#39;arguments fournis. Prenons par exemple les deux fonctions suivantes :</p>
</div>
<div class="listingblock data-line-109">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">function f(uint _in) public pure renvoie (uint out) {
sortie = 1 ;
}

fonction f(uint _in, bytes32 _key) public pure renvoie (uint out) {
sortie = 2 ;
}</code></pre>
</div>
</div>
<div class="paragraph data-line-119">
<p>La première fonction (nommée f) accepte un argument d&#39;entrée de type uint ; la deuxième fonction (également nommée f) accepte deux arguments, un de type uint et un de type bytes32. Avoir plusieurs définitions de fonction avec le même nom prenant des arguments différents peut être déroutant, donc Vyper ne prend pas en charge la surcharge de fonction.</p>
</div>
</div>
<div class="sect3 data-line-121">
<h4 id="_conversion_de_type_variable">Conversion de type variable</h4>
<div class="paragraph data-line-123">
<p>Il existe deux types de typage : <em>implicit</em> et <em>explicit</em></p>
</div>
<div class="paragraph data-line-125">
<p>Le typecasting implicite est souvent effectué au moment de la compilation. Par exemple, si une conversion de type est sémantiquement correcte et qu&#39;aucune information n&#39;est susceptible d&#39;être perdue, le compilateur peut effectuer une conversion implicite, telle que la conversion d&#39;une variable de type uint8 en uint16. Les premières versions de Vyper autorisaient le transtypage implicite des variables, mais pas les versions récentes.</p>
</div>
<div class="paragraph data-line-127">
<p>Les transtypages explicites peuvent être insérés dans Solidity. Malheureusement, ils peuvent entraîner des comportements inattendus. Par exemple, convertir un uint32 en un type plus petit uint16 supprime simplement les bits d&#39;ordre supérieur, comme illustré ici :</p>
</div>
<div class="listingblock data-line-130">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">uint32 a = 0x12345678 ;
uint16 b = uint16(a);
// La variable b est 0x5678 maintenant</code></pre>
</div>
</div>
<div class="paragraph data-line-136">
<p>Vyper a à la place une fonction convert pour effectuer des transtypages explicites. La fonction convert (trouvée à la ligne 82 de <a href="http://bit.ly/2P36ZKT" data-href="http://bit.ly/2P36ZKT"><em>convert.py</em></a>) :</p>
</div>
<div class="listingblock data-line-139">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">def convert(expr, contexte):
type_sortie = expr.args[1].s
si output_type dans conversion_table :
return conversion_table[output_type](expr, context)
autre:
raise Exception(&amp;quot;La conversion en {} n&amp;#39;est pas valide.&amp;quot;.format(output_type))</code></pre>
</div>
</div>
<div class="paragraph data-line-148">
<p>Notez l&#39;utilisation de conversion_table (trouvé à la ligne 90 du même fichier), qui ressemble à ceci :</p>
</div>
<div class="listingblock data-line-151">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">conversion_table = {
&amp;#39;int128&amp;#39; : to_int128,
&amp;#39;uint256&amp;#39; : to_unint256,
&amp;#39;décimal&amp;#39; : to_decimal,
&amp;#39;bytes32&amp;#39; : to_bytes32,
}</code></pre>
</div>
</div>
<div class="paragraph data-line-160">
<p>Lorsqu&#39;un développeur appelle convert, il fait référence à conversion_table, ce qui garantit que la conversion appropriée est effectuée. Par exemple, si un développeur passe un int128 à la fonction convert, la fonction to_int128 à la ligne 26 du même fichier (<em>convert.py</em>) sera exécutée. La fonction to_int128 est la suivante :</p>
</div>
<div class="listingblock data-line-163">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">@signature((&amp;#39;int128&amp;#39;, &amp;#39;uint256&amp;#39;, &amp;#39;bytes32&amp;#39;, &amp;#39;bytes&amp;#39;), &amp;#39;str_literal&amp;#39;)
def to_int128(expr, args, kwargs, contexte):
in_node = args[0]
typ, len = get_type(in_node)
si tapé dans (&amp;#39;int128&amp;#39;, &amp;#39;uint256&amp;#39;, &amp;#39;bytes32&amp;#39;):
si in_node.typ.is_literal
et non SizeLimits.MINNUM &amp;lt;= in_node.value &amp;lt;= SizeLimits.MAXNUM :
lever InvalidLiteralException(
&amp;quot;Nombre hors limites : {}&amp;quot;.format(in_node.value), expr
)
return LLLnode.from_list(
[&amp;#39;clamp&amp;#39;, [&amp;#39;mload&amp;#39;, MemoryPositions.MINNUM], in_node,
[&amp;#39;mload&amp;#39;, MemoryPositions.MAXNUM]], typ=BaseType(&amp;#39;int128&amp;#39;),
pos=getpos(expr)
)
autre:
return byte_array_to_num(in_node, expr, &amp;#39;int128&amp;#39;)</code></pre>
</div>
</div>
<div class="paragraph data-line-183">
<p>Comme vous pouvez le constater, le processus de conversion garantit qu&#39;aucune information ne peut être perdue. si c&#39;est possible, une exception est levée. Le code de conversion empêche la troncation ainsi que d&#39;autres anomalies qui seraient normalement autorisées par un transtypage implicite.</p>
</div>
<div class="paragraph data-line-185">
<p>Choisir un transtypage explicite plutôt qu&#39;implicite signifie que le développeur est responsable de l&#39;exécution de tous les transtypages. Bien que cette approche produise un code plus détaillé, elle améliore également la sécurité et la vérifiabilité des contrats intelligents.</p>
</div>
</div>
<div class="sect3 data-line-188">
<h4 id="_préconditions_et_postconditions">Préconditions et Postconditions</h4>
<div class="paragraph data-line-190">
<p>Vyper gère explicitement les préconditions, les postconditions et les changements d&#39;état. Bien que cela produise un code redondant, cela permet également une lisibilité et une sécurité maximales. Lors de la rédaction d&#39;un contrat intelligent dans Vyper, un développeur doit observer les trois points suivants :</p>
</div>
<div class="dlist data-line-192">
<dl>
<dt class="hdlist1">État</dt>
<dd>
<p>Quel est l&#39;état/condition actuel des variables d&#39;état Ethereum ?</p>
</dd>
<dt class="hdlist1">Effets</dt>
<dd>
<p>Quels effets ce code de contrat intelligent aura-t-il sur la condition des variables d&#39;état lors de l&#39;exécution ? Autrement dit, qu&#39;est-ce qui sera affecté et qu&#39;est-ce qui ne sera pas affecté ? Ces effets sont-ils conformes aux intentions du smart contract ?</p>
</dd>
<dt class="hdlist1">Interaction</dt>
<dd>
<p>Une fois que les deux premières considérations ont été traitées de manière exhaustive, il est temps d&#39;exécuter le code. Avant le déploiement, parcourez logiquement le code et examinez tous les résultats permanents possibles, les conséquences et les scénarios d&#39;exécution du code, y compris les interactions avec d&#39;autres contrats.</p>
</dd>
</dl>
</div>
<div class="paragraph data-line-199">
<p>Idéalement, chacun de ces points devrait être soigneusement examiné puis documenté de manière approfondie dans le code. Cela améliorera la conception du code, le rendant finalement plus lisible et auditable.</p>
</div>
</div>
</div>
<div class="sect2 data-line-202">
<h3 id="décorateurs_sec">Décorateurs</h3>
<div class="paragraph data-line-203">
<p>Les décorateurs suivants peuvent être utilisés au début de chaque fonction :</p>
</div>
<div class="dlist data-line-205">
<dl>
<dt class="hdlist1">@private </dt>
<dd>
<p>Le décorateur <code>@private</code> rend la fonction inaccessible depuis l&#39;extérieur du contrat.</p>
</dd>
<dt class="hdlist1">@public </dt>
<dd>
<p>Le décorateur <code>@public</code> rend la fonction à la fois visible et exécutable publiquement. Par exemple, même le portefeuille Ethereum affichera de telles fonctions lors de la visualisation du contrat.</p>
</dd>
<dt class="hdlist1">@constant </dt>
<dd>
<p>Les fonctions avec le décorateur <code>@constant</code> ne sont pas autorisées à modifier les variables d&#39;état. En fait, le compilateur rejettera le programme entier (avec une erreur appropriée) si la fonction essaie de changer une variable d&#39;état.</p>
</dd>
<dt class="hdlist1">@payable </dt>
<dd>
<p>Seules les fonctions avec le décorateur <code>@payable</code> sont autorisées à transférer de la valeur.</p>
</dd>
</dl>
</div>
<div class="paragraph data-line-213">
<p>Vyper implémente explicitement <a href="http://bit.ly/2P14RDq" data-href="http://bit.ly/2P14RDq">la logique des décorateurs</a>. Par exemple, le processus de compilation de Vyper échouera si une fonction a à la fois un décorateur <code>@payable</code> et un décorateur <code>@constant</code>. Cela a du sens car une fonction qui transfère une valeur a par définition mis à jour l&#39;état, elle ne peut donc pas être <code>@constant</code>. Chaque fonction Vyper doit être décorée avec <code>@public</code> ou <code>@private</code> (mais pas les deux !).</p>
</div>
</div>
<div class="sect2 data-line-216">
<h3 id="order_of_functions_sec">Ordre des fonctions et des variables</h3>
<div class="paragraph data-line-218">
<p>Chaque contrat intelligent Vyper individuel se compose d&#39;un seul fichier Vyper uniquement. En d&#39;autres termes, tout le code d&#39;un contrat intelligent Vyper donné, y compris toutes les fonctions, variables, etc., existe au même endroit. Vyper exige que la fonction et les déclarations de variables de chaque contrat intelligent soient écrites physiquement dans un ordre particulier. La solidité n&#39;a pas du tout cette exigence. Jetons un coup d&#39;œil à un exemple Solidity :</p>
</div>
<div class="listingblock data-line-221">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">pragma solidité ^0.4.0 ;

contrat de commande {

fonction topFonction()
externe
renvoie (bool) {
initiatizedBelowTopFunction = this.lowerFunction();
retour initialiséBelowTopFunction ;
}

bool initialiséBelowTopFunction ;
bool lowerFunctionVar ;

fonction inférieureFonction()
externe
renvoie (bool) {
lowerFunctionVar = true ;
return lowerFunctionVar ;
}

}</code></pre>
</div>
</div>
<div class="paragraph data-line-246">
<p>Dans cet exemple, la fonction appelée topFunction appelle une autre fonction, lowerFunction. topFunction attribue également une valeur à une variable appelée initiatizedBelowTopFunction. Comme vous pouvez le voir, Solidity n&#39;exige pas que ces fonctions et variables soient physiquement déclarées avant d&#39;être appelées par le code d&#39;exécution. Il s&#39;agit d&#39;un code Solidity valide qui se compilera avec succès.</p>
</div>
<div class="paragraph data-line-248">
<p>Les exigences de commande de Vyper ne sont pas une nouveauté ; en fait, ces exigences de commande ont toujours été présentes dans la programmation Python. La commande requise par Vyper est simple et logique, comme illustré dans cet exemple suivant :</p>
</div>
<div class="listingblock data-line-251">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python"># Déclarez une variable appelée theBool
theBool : public(bool)

# Déclarez une fonction appelée topFunction
@Publique
def topFunction() -&amp;gt; bool :
# Attribuez une valeur à la fonction déjà déclarée appelée theBool
self.theBool = Vrai
retour self.theBool

# Déclarez une fonction appelée lowerFunction
@Publique
def lowerFunction() :
# Appelez la fonction déjà déclarée appelée topFunction
assert self.topFunction()</code></pre>
</div>
</div>
<div class="paragraph data-line-269">
<p>Cela montre le bon ordre des fonctions et des variables dans un contrat intelligent Vyper. Notez comment la variable theBool et la fonction topFunction sont déclarées avant qu&#39;elles ne reçoivent une valeur et ne soient appelées, respectivement. Si theBool était déclaré sous topFunction ou si topFunction était déclaré sous lowerFunction, ce contrat ne serait pas compilé.</p>
</div>
</div>
<div class="sect2 data-line-272">
<h3 id="éditeur_de_code_en_ligne_et_compilateur_sec">compilation</h3>
<div class="paragraph data-line-273">
<p>Vyper a son propre <a href="https://vyper.online" data-href="https://vyper.online">éditeur de code et compilateur en ligne</a>, qui vous permet d&#39;écrire puis compilez vos contrats intelligents en bytecode, ABI et LLL en utilisant uniquement votre navigateur Web. Le compilateur en ligne Vyper propose une variété de contrats intelligents pré-écrits pour votre commodité, y compris des contrats pour une simple enchère ouverte, des achats à distance sécurisés, des jetons ERC20, etc. Cet outil, propose une seule version du logiciel de compilation. Il est mis à jour régulièrement mais ne garantit pas toujours la dernière version. Etherscan a un <a href="https://etherscan.io/vyper" class="undefined" data-href="https://etherscan.io/vyper">https://etherscan.io/vyper</a> [compilateur Vyper en ligne] qui vous permet de sélectionner la version du compilateur. De plus, <a href="https://remix.ethereum.org" data-href="https://remix.ethereum.org">Remix</a>, conçu à l&#39;origine pour les contrats intelligents Solidity, dispose désormais d&#39;un plug-in Vyper disponible dans l&#39;onglet Paramètres.</p>
</div>
<div class="exampleblock data-line-276">
<div class="content">
<div class="paragraph data-line-277">
<p>Vyper implémente ERC20 en tant que contrat précompilé, ce qui permet d&#39;utiliser facilement ces contrats intelligents prêts à l&#39;emploi. Les contrats dans Vyper doivent être déclarés en tant que variables globales. Un exemple de déclaration de la variable ERC20 est le suivant :</p>
</div>
<div class="listingblock data-line-280">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">jeton : adresse (ERC20)</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph data-line-285">
<p>Vous pouvez également compiler un contrat à l&#39;aide de la ligne de commande. Chaque contrat Vyper est enregistré dans un seul fichier avec l&#39;extension <em>.vy</em>.
Une fois installé, vous pouvez compiler un contrat avec Vyper en exécutant la commande suivante :</p>
</div>
<div class="listingblock data-line-288">
<div class="content">
<pre>vyper ~/hello_world.vy</pre>
</div>
</div>
<div class="paragraph data-line-292">
<p>La description ABI lisible par l&#39;homme (au format JSON) peut ensuite être obtenue en exécutant la commande suivante :</p>
</div>
<div class="listingblock data-line-294">
<div class="content">
<pre>vyper -f json ~/hello_world.v.py</pre>
</div>
</div>
</div>
<div class="sect2 data-line-299">
<h3 id="protecting_against_overflows_sec">Protection contre les erreurs de débordement au niveau du compilateur</h3>
<div class="paragraph data-line-301">
<p>Erreurs de débordement dans le logiciel peut être catastrophique lorsqu&#39;il s&#39;agit de valeur réelle. Par exemple, une <a href="http://bit.ly/2yHfvoF" data-href="http://bit.ly/2yHfvoF">transaction de la mi-avril 2018</a> montre le pass :[ &lt;span class="keep-together"&gt;transfert malveillant de plus de 57 896 044 618 658 100 000 000 000 000 000 000 000 000,&lt;/span&gt; ]000 000 000 000 000 000 tokens BEC. Cette transaction était le résultat d&#39;un problème de débordement d&#39;entier dans le contrat de jeton ERC20 de BeautyChain (<em>BecToken.sol</em>). Les développeurs de Solidity ont accès à des bibliothèques comme <a href="http://bit.ly/2ABhb4l" data-href="http://bit.ly/2ABhb4l">SafeMath</a> ainsi qu&#39;à des outils d&#39;analyse de la sécurité des contrats intelligents Ethereum comme <a href="http://bit.ly/2CQRoGU" data-href="http://bit.ly/2CQRoGU">Mythril OSS</a>. Cependant, les développeurs ne sont pas obligés d&#39;utiliser les outils de sécurité. En termes simples, si la sécurité n&#39;est pas appliquée par le langage, les développeurs peuvent écrire du code non sécurisé qui se compilera avec succès et s&#39;exécutera plus tard &quot;avec succès&quot;.</p>
</div>
<div class="paragraph data-line-303">
<p>Vyper dispose d&#39;une protection intégrée contre les débordements, mise en œuvre selon une approche à deux volets. Tout d&#39;abord, Vyper fournit <a href="http://bit.ly/2PuDfpB" data-href="http://bit.ly/2PuDfpB">un SafeMath équivalent</a> qui inclut les cas d&#39;exception nécessaires pour l&#39;arithmétique entière. Deuxièmement, Vyper utilise des pinces chaque fois qu&#39;une constante littérale est chargée, qu&#39;une valeur est transmise à une fonction ou qu&#39;une variable est affectée. Les pinces sont implémentées via des fonctions personnalisées dans le compilateur LLL (Low-level Lisp-like Language) et ne peuvent pas être désactivées. (Le compilateur Vyper génère LLL plutôt que le bytecode EVM ; cela simplifie le développement de Vyper lui-même.)</p>
</div>
</div>
<div class="sect2 data-line-307">
<h3 id="lecture_et_écriture_données_sec">Lecture et écriture de données</h3>
<div class="paragraph data-line-308">
<p>Bien qu&#39;il soit coûteux de stocker, lire et modifier des données, ces opérations de stockage sont une composante nécessaire de la plupart des contrats intelligents. Les contrats intelligents peuvent écrire des données à deux endroits :</p>
</div>
<div class="dlist data-line-310">
<dl>
<dt class="hdlist1">État global </dt>
<dd>
<p> Les variables d&#39;état d&#39;un contrat intelligent donné sont stockées dans le trie d&#39;état global d&#39;Ethereum ; un contrat intelligent ne peut stocker, lire et modifier que des données relatives à l&#39;adresse de ce contrat particulier (c&#39;est-à-dire que les contrats intelligents ne peuvent pas lire ou écrire dans d&#39;autres contrats intelligents).</p>
</dd>
<dt class="hdlist1">Logs </dt>
<dd>
<p>Un contrat intelligent peut également écrire dans les données de la chaîne d&#39;Ethereum via des événements de journal. Alors que Vyper utilisait initialement la syntaxe  <code>__log__</code>  pour déclarer ces événements, une mise à jour a été effectuée pour aligner davantage sa déclaration d&#39;événement sur la syntaxe d&#39;origine de Solidity. Par exemple, la déclaration par Vyper d&#39;un événement appelé <code>MyLog</code> était à l&#39;origine <code>MyLog: __log__({arg1: indexed(bytes[3])})</code>. La syntaxe est maintenant devenue <code>MyLog: event({arg1: indexed(bytes[3])})</code>. Il est important de noter que l&#39;exécution de l&#39;événement de journalisation dans Vyper était, et est toujours, comme suit : <code>log.MyLog(&quot;123&quot;)</code>.</p>
</dd>
</dl>
</div>
<div class="paragraph data-line-314">
<p>Bien que les contrats intelligents puissent écrire dans les données de la chaîne d&#39;Ethereum (via des événements de journal), ils ne peuvent pas lire les événements de journal en chaîne qu&#39;ils ont créés. Néanmoins, l&#39;un des avantages de l&#39;écriture dans les données de la chaîne d&#39;Ethereum via des événements de journal est que les journaux peuvent être découverts et lus, sur la chaîne publique, par des clients légers. Par exemple, la valeur logsBloom dans un bloc extrait peut indiquer si un événement de journal est présent ou non. Une fois que l&#39;existence d&#39;événements de journal a été établie, les données de journal peuvent être obtenues à partir d&#39;un reçu de transaction donné.</p>
</div>
</div>
<div class="sect2 data-line-317">
<h3 id="_conclusion">Conclusion</h3>
<div class="paragraph data-line-319">
<p>Vyper est un nouveau langage de programmation orienté contrat puissant et intéressant. Sa conception est biaisée vers &quot;l&#39;exactitude&quot;, au détriment d&#39;une certaine flexibilité. Cela peut permettre aux programmeurs de rédiger de meilleurs contrats intelligents et d&#39;éviter certains pièges qui provoquent l&#39;apparition de graves vulnérabilités. Ensuite, nous examinerons plus en détail la sécurité des contrats intelligents. Certaines des nuances de la conception de Vyper peuvent devenir plus apparentes une fois que vous avez lu tous les problèmes de sécurité possibles qui peuvent survenir dans les contrats intelligents.</p>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2022-05-01 12:59:42 -0400
</div>
</div>
</body>
</html>